在阮一峰老师关于 ssh 免密登录的文章中有相关的知识。

## 登录验证
客户端要访问服务端的资源，需要通过登录验证，验证后可以获得权限，使用权限去访问资源。

## 登录授权
在使用密码通过验证后，服务端会给客户端发送授权码，为了安全，需要进行加密传输。
1. 客户端使用服务器的公钥加密客户端的公钥，发送给服务器。
2. 服务器使用服务器的私钥解密，得到客户端的公钥。
3. 服务器使用客户端的公钥加密授权码，发送给客户端。
4. 客户端使用自己的私钥解密得到授权码。

在以上过程中，服务器的公钥、客户端公钥的加密结果（服务器私钥能解），授权码的加密结果（客户端私钥能解），三者暴露在外，但却是安全的。

## 中间人攻击
既然无法监听到通信的信息，那就作为中间人获得信息差。
1. 中间人拦截服务端的公钥，发送给客户端的是中间人的公钥，此后所有信息都可以被中间人的私钥解密，特别是在客户端获得服务器返回的授权码。

## 防范
1. 使用 https。
2. 公布服务器的公钥（证书认证）。

## 番外：ssh 免密登录
1. 登录验证
2. 发送公钥给服务端。
3. 服务端使用公钥加密随机字符串。
4. 如果客户端能解（使用客户端私钥），说明是这个通过验证的客户端。