## 概念
前提：
1. 恶意网站获取了用户的 cookie
2. 用户在目标网站的 cookie 仍有效（仍登录）

此时，恶意网站就可以冒充用户的身份并发送跨站请求。原因就是，服务端只认 cookie，不知道请求是用户发的，还是攻击者发的。

在获得 cookie 后，向目标发送请求存在跨域问题，因此攻击者需要考虑如何发送跨域请求：
1. get 类型，通过 img
2. post 类型，自动提交表单。
3. 在 a 标签的 href 中构建请求

如何获得用户 cookie？这不是 csrf 的内容，csrf 是指在知道 cookie 的情况下绕过同源策略向目标发送请求并得到响应。

你可以在目标发布一篇帖子，包含一个链接，点击这个链接就向你的服务器发送携带 cookie 的请求，这样你就获得用户的 cookie 了。更常见的例子是：攻击者伪造一个包含发送隐藏表单的网站并发送给用户，用户点击后就会在浏览器触发这个表单，浏览器 cookie 就会被携带发送。

## 防范
1. 同源检测。服务器限制请求的 origin 或 referer，不足是这是可以被伪造的。
2. 设置 cookie 的 samesite，让 cookie 不能被第三方使用。