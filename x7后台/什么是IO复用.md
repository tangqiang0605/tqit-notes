本文将从基础的计算机底层知识（阻塞、非阻塞、同步、异步）到计算机网络中 http 请求复用机制实例，来介绍什么是 IO 复用以及 IO 复用的优势。

读完本篇文章，你将收获：
1. 对 http 协议更加了解。
2. 对计算机底层原理有一定认识。
3. 为深入理解事件循环（event loop）扫除计算机基础障碍。
4. 更好地理解网络 IO 模型。
## 理解IO
IO：在计算机中，CPU 负责处理各种计算任务，CPU 本身就具备一定的存储数据的能力，但是非常有限，为了突破这一限制，计算机中引入了虚拟空间机制。在逻辑上，它让 CPU 拥有了无限存储空间，但在物理上，大部分数据存在于外部内存，CPU 要读取数据，需要通过 I 操作从外部存储读取到 CPU 的存储中，供 CPU 计算。当 CPU 运行完成需要将数据输出时，就执行 O 操作将 CPU 中的数据输出到外部存储中。
用户空间：程序就是一段在 CPU 中运行的代码。为了保护内核安全，系统将 CPU 中的空间划分为了用户空间和内核空间。
IO 的两个阶段：第一阶段请求阶段：IO 操作读取的数据第一时间送到了内核空间，第二阶段操作阶段：内核空间将数据复制到用户空间，然后代码就可以读取到数据了。
具体例子，比如，一段读取文件的代码，在被放入 CPU 执行后，CPU 会发起 IO 请求，从外部数据复制数据到内核空间中，然后再将数据从内核空间复制到用户空间中，然后代码就可以获取到这部分数据了。

## IO 阻塞模型与非阻塞模型
阻塞，这个词非常形象，具体就是前面的代码执行了，但是需要花很多时间，所以后面的代码一时不能执行，CPU 空转，造成阻塞现象。
不加修饰和优化的 IO 过程就是最简单的 IO 阻塞模型。在代码要求内核发起 IO 请求时停止运行，在用户空间接受到数据后继续运行后面的代码。显然，这会让代码存在一段时间的阻塞。
非阻塞模型：IO 阻塞模型不管在 IO 请求阶段还是 IO 复制阶段，都是阻塞的。而非阻塞模型在 IO 请求阶段是不会阻塞的，在代码发起请求后，继续执行后续代码，但在执行后续代码的过程中，程序会定时向内核询问内核空间是否已经得到数据了，如果没有，就继续运行然后在下一个时间点再次询问，如果有，那么代码就停止运行，转而运行 IO 操作阶段，将 IO 数据从